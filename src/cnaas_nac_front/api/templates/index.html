<html>
  <head>
    <title>CNaaS</title>
    <script src="{{ url_for('static',filename='sort_table.js') }}"></script>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='style.css') }}">
  </head>
  <body style="background-color:#d0d0d0;text-align:left">
    <form action="" method="post">
      {{ form.hidden_tag() }}
      <div class="navbar">
	{{ form.delete(class_="button") }}
	{{ form.enable(class_="button") }}
	{{ form.disable(class_="button") }}
	{{ form.bounce_btn(class_="button") }}
	{{ form.set_vlan_btn(class_="button") }} {{ form.set_vlan(class_="input") }}
	{{ form.set_comment_btn(class_="button") }}
	{{ form.set_comment(class_="input") }}
      </div>
      <div class="main">
	{% with messages = get_flashed_messages() %}
	{% if messages %}
	{% for message in messages %}
	<font color="red"><b>{{ message }}</b></font><br/>
	{% endfor %}
	{% endif %}
	{% endwith %}
	<table id="default-table">
	  <tr>
	    <th><span onclick="sortTable(0)">&nbsp;</span></th>
	    <th><span onclick="sortTable(1)">Username &#8595;</span></th>
	    <th><span onclick="sortTable(2)">VLAN &#8595;</span></th>
	    <th><span onclick="sortTable(3)">Switch IP address &#8595;</span></th>
	    <th><span onclick="sortTable(4)">Switch port &#8595;</span></th>
	    <th><span onclick="sortTable(5)">Status &#8595;</span></th>
	    <th><span onclick="sortTable(7)">Last reply &#8595;</span></th>
	    <th><span onclick="sortTable(8)">Last request &#8595;</span></th>
	    <th><span onclick="sortTable(9)">Comment</span></th>
	  </tr>
	  {% for user in users %}
	  {% if users.active %}
	  <tr id="enabled">
	    {% else %}
	  <tr id="disabled">
	    {% endif %}
	    <td>
	      {{ form.selected(value=user.username) }}
	    </td>
	    <td>
	      {{ user.username }}
	    </td>
	    <td>
	      {{ user.vlan }}
	    </td>
	    <td>
	      {{ user.nas_ip_address }}
	    </td>
	    <td>
	      {{ user.nas_port_id }}
	    </td>
	    {% if user.active %}
	    <td bgcolor="lightgreen">
	      Enabled
	    </td>
	    {% else %}
	    <td>
	      Disabled
	    </td>
	    {% endif %}
	    {% if user.reason != "User accepted" and user.reason != "" %}
	    <td bgcolor="orange">
	      {% else %}
	    <td>
	      {% endif %}
	      {% if user.reason %}
	      {{ user.reason }}
	      {% else %}
	      &nbsp;
	      {% endif %}
	    </td>
	    <td>
	      {{ user.authdate }}
	    </td>
	    <td>
	      {{ user.comment }}
	    </td>
	  </tr>
	  {% endfor %}
	</table>
      </div>
    </form>
  </body>
</html>
