<html>
  <head>
    <title>CNaaS</title>
    <script src="toggle.js"></script>
    <script src="{{ url_for('static',filename='sort_table.js') }}"></script>
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='style.css') }}">
  </head>
  <body style="background-color:#d0d0d0;text-align:left">
    <form action="" method="post" novalidate>
      <div class="navbar">
	{{ form.set_vlan_btn(class_="button") }} {{ form.set_vlan(class_="input") }} {{ form.delete(class_="button") }} {{ form.enable(class_="button") }} {{ form.disable(class_="button") }} {{ form.bounce_btn(class_="button") }}

	{{ form.hidden_tag() }}
	{% with messages = get_flashed_messages() %}
	{% if messages %}
	{% for message in messages %}
	<font color="red"><b>{{ message }}</b></font>
	{% endfor %}
	{% endif %}
	{% endwith %}

      </div>
      <div class="main">
	<br/><br/>
	<table id="default-table">
	  <tr>
	    <th><span onclick="sortTable(0)">&nbsp;</span></th>
	    <th><span onclick="sortTable(1)">Username &#8595;</span></th>
	    <th><span onclick="sortTable(2)">VLAN &#8595;</span></th>
	    <th><span onclick="sortTable(3)">Switch IP address &#8595;</span></th>
	    <th><span onclick="sortTable(4)">Switch port &#8595;</span></th>
	    <th><span onclick="sortTable(5)">Status &#8595;</span></th>
	    <th><span onclick="sortTable(7)">Last reply &#8595;</span></th>
	    <th><span onclick="sortTable(8)">Last request &#8595;</span></th>
	  </tr>

	  {% for user in users %}
	  {% if users.active %}
	  <tr id="enabled">
	    {% else %}
	  <tr id="disabled">
	    {% endif %}
	    <td>
	      {{ form.selected(value=user.username) }}
	    </td>
	    <td>
	      {{ user.username }}
	    </td>
	    <td>
	      {{ user.vlan }}
	    </td>
	    <td>
	      {{ user.nas_ip_address }}
	    </td>
	    <td>
	      {{ user.nas_port_id }}
	    </td>
	    {% if user.active %}
	    <td bgcolor="lightgreen">
	      Enabled
	    </td>
	    {% else %}
	    <td>
	      Disabled
	    </td>
	    {% endif %}
	    {% if user.reason != "User accepted" and user.reason != "" %}
	      <td bgcolor="orange">
	    {% else %}
	      <td>
	    {% endif %}
	    {% if user.reason %}
	      {{ user.reason }}
	    {% else %}
	    &nbsp;
	    {% endif %}
	    </td>
	    <td>
	      {{ user.authdate }}
	    </td>
	  </tr>
	  {% endfor %}
	</table>
	<hr/>
	<p>
	  Username: {{ form.username(size=32) }}
	  Password: {{ form.password(size=32) }}
	  VLAN: {{ form.vlan(size=32) }}
	  {{ form.submit() }}
	</p>
      </div>
    </form>
  </body>
</html>
